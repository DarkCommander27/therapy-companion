<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>CareBridge Companion</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div class="app">
    <!-- Login Screen -->
    <div id="loginScreen" class="screen active">
      <div class="login-container">
        <div class="login-header">
          <h1>CareBridge Companion ğŸ¤–</h1>
          <p>Multi-Device Secure Access</p>
        </div>

        <!-- Auth Method Selector -->
        <div class="auth-method-selector">
          <button class="auth-method-btn active" data-method="pin">
            <span class="method-icon">ğŸ”</span>
            <span class="method-text">PIN Login</span>
          </button>
          <button class="auth-method-btn" data-method="password">
            <span class="method-icon">ğŸ”‘</span>
            <span class="method-text">Password Login</span>
          </button>
          <button class="auth-method-btn" data-method="staff">
            <span class="method-icon">ğŸ‘”</span>
            <span class="method-text">Staff Login</span>
          </button>
        </div>

        <!-- PIN Login Form -->
        <div class="login-form active" id="pinLoginForm">
          <div class="form-group">
            <label for="userIdInput">User ID:</label>
            <input type="text" id="userIdInput" placeholder="Enter your user ID" />
          </div>

          <div class="form-group">
            <label for="pinInput">PIN (4-digit):</label>
            <input type="password" id="pinInput" placeholder="Enter your PIN" maxlength="4" />
          </div>

          <div id="loginStatus" class="status-message"></div>

          <button id="loginBtn" class="btn-primary" style="width: 100%; padding: 12px; margin-top: 20px;">
            Login / Register
          </button>

          <div class="login-help">
            <p>
              ğŸ’¡ New User? Create a PIN (4 digits) when you first login.
              <br>Your PIN lets you access your account from any device.
            </p>
          </div>
        </div>

        <!-- Password Login Form -->
        <div class="login-form" id="passwordLoginForm" style="display: none;">
          <div class="form-group">
            <label for="userIdPassword">User ID:</label>
            <input type="text" id="userIdPassword" placeholder="Enter your user ID" />
          </div>

          <div class="form-group">
            <label for="passwordInput">Password:</label>
            <input type="password" id="passwordInput" placeholder="Enter your password" />
          </div>

          <div class="password-strength" id="passwordStrength"></div>

          <div id="loginStatusPassword" class="status-message"></div>

          <button id="passwordLoginBtn" class="btn-primary" style="width: 100%; padding: 12px; margin-top: 20px;">
            Login
          </button>

          <div class="login-help">
            <p>
              ğŸ’¡ Password must be at least 6 characters.
              <br>Use a strong password to protect your account.
            </p>
          </div>
        </div>

        <!-- Staff Login Form -->
        <div class="login-form" id="staffLoginForm" style="display: none;">
          <div class="form-group">
            <label for="staffEmailUsername">Email or Username:</label>
            <input type="text" id="staffEmailUsername" placeholder="Enter email or username" />
          </div>

          <div class="form-group">
            <label for="staffPassword">Password:</label>
            <input type="password" id="staffPassword" placeholder="Enter your password" />
          </div>

          <div class="form-group">
            <label>
              <input type="checkbox" id="rememberDevice" />
              Remember this device
            </label>
          </div>

          <div id="loginStatusStaff" class="status-message"></div>

          <button id="staffLoginBtn" class="btn-primary" style="width: 100%; padding: 12px; margin-top: 20px;">
            Staff Login
          </button>

          <div class="login-help">
            <p>
              ğŸ‘” Staff members use their email or username to login.
              <br>This redirects to the staff dashboard with role-based access.
            </p>
          </div>
        </div>
      </div>
    </div>

    <!-- Setup Screen -->
    <div id="setupScreen" class="screen">
      <div class="setup-container">
        <div class="setup-header">
          <h1>Let's personalize your experience</h1>
          <p>Choose your avatar and color theme</p>
        </div>

        <!-- Avatar Selection -->
        <div class="setup-section">
          <h2>Choose Your Avatar</h2>
          <div class="avatar-grid">
            <div class="avatar-option" data-avatar="ğŸ¤–">
              <div class="avatar-preview">ğŸ¤–</div>
              <p>Robot</p>
            </div>
            <div class="avatar-option" data-avatar="ğŸ§ ">
              <div class="avatar-preview">ğŸ§ </div>
              <p>Brain</p>
            </div>
            <div class="avatar-option" data-avatar="â­">
              <div class="avatar-preview">â­</div>
              <p>Star</p>
            </div>
            <div class="avatar-option" data-avatar="ğŸŒŸ">
              <div class="avatar-preview">ğŸŒŸ</div>
              <p>Sparkle</p>
            </div>
            <div class="avatar-option" data-avatar="ğŸ’š">
              <div class="avatar-preview">ğŸ’š</div>
              <p>Heart</p>
            </div>
            <div class="avatar-option" data-avatar="ğŸŒˆ">
              <div class="avatar-preview">ğŸŒˆ</div>
              <p>Rainbow</p>
            </div>
            <div class="avatar-option" data-avatar="ğŸ¨">
              <div class="avatar-preview">ğŸ¨</div>
              <p>Creative</p>
            </div>
            <div class="avatar-option" data-avatar="ğŸŒ">
              <div class="avatar-preview">ğŸŒ</div>
              <p>World</p>
            </div>
          </div>
        </div>

        <!-- Color Theme Selection -->
        <div class="setup-section">
          <h2>Choose Your Color Theme</h2>
          <div class="color-grid">
            <div class="color-option" data-theme="ocean">
              <div class="color-preview" style="background: linear-gradient(135deg, #E6F4F1, #2C7A7B);"></div>
              <p>Ocean</p>
            </div>
            <div class="color-option" data-theme="sunset">
              <div class="color-preview" style="background: linear-gradient(135deg, #FFE8CC, #FF6B35);"></div>
              <p>Sunset</p>
            </div>
            <div class="color-option" data-theme="forest">
              <div class="color-preview" style="background: linear-gradient(135deg, #E8F5E9, #2E7D32);"></div>
              <p>Forest</p>
            </div>
            <div class="color-option" data-theme="lavender">
              <div class="color-preview" style="background: linear-gradient(135deg, #F3E5F5, #7B1FA2);"></div>
              <p>Lavender</p>
            </div>
            <div class="color-option active" data-theme="mint">
              <div class="color-preview" style="background: linear-gradient(135deg, #E0F2F1, #00897B);"></div>
              <p>Mint</p>
            </div>
            <div class="color-option" data-theme="coral">
              <div class="color-preview" style="background: linear-gradient(135deg, #FFEBEE, #E53935);"></div>
              <p>Coral</p>
            </div>
          </div>
        </div>

        <!-- Start Button -->
        <button id="startBtn" class="btn btn-primary btn-large">Start Chatting âœ¨</button>
      </div>
    </div>

    <!-- Chat Screen -->
    <div id="chatScreen" class="screen">
      <div class="chat-container">
        <!-- Header -->
        <div class="chat-header">
          <div class="header-content">
            <div class="avatar-display" id="headerAvatar">ğŸ¤–</div>
            <div class="header-text">
              <h1>CareBridge Companion</h1>
              <p id="statusText">Ready to chat</p>
            </div>
          </div>
          <button id="settingsBtn" class="btn-icon" title="Settings">âš™ï¸</button>
        </div>

        <!-- Messages -->
        <div class="messages-container" id="messagesContainer">
          <div class="message assistant">
            <div class="avatar">ğŸ¤–</div>
            <div class="content">
              <p>Hi there! ğŸ‘‹ I'm CareBridge Companion. I'm here to listen and support you. How are you doing today?</p>
            </div>
          </div>
        </div>

        <!-- Input -->
        <div class="input-container">
          <div class="input-group">
            <input 
              type="text" 
              id="messageInput" 
              placeholder="Type your thoughts... (or just chat.)"
              autocomplete="off"
            >
            <button id="sendBtn" class="btn-send" title="Send message">ğŸ“¤</button>
          </div>
          <p class="disclaimer">ğŸ’¬ Everything you share here stays private and confidential</p>
        </div>
      </div>
    </div>

    <!-- Settings Modal -->
    <div id="settingsModal" class="modal">
      <div class="modal-content">
        <div class="modal-header">
          <h2>Settings</h2>
          <button id="closeSettingsBtn" class="btn-close">âœ•</button>
        </div>

        <div class="modal-body">
          <!-- Avatar in Settings -->
          <div class="settings-section">
            <h3>Change Avatar</h3>
            <div class="avatar-grid small">
              <div class="avatar-option" data-avatar="ğŸ¤–">
                <div class="avatar-preview">ğŸ¤–</div>
              </div>
              <div class="avatar-option" data-avatar="ğŸ§ ">
                <div class="avatar-preview">ğŸ§ </div>
              </div>
              <div class="avatar-option" data-avatar="â­">
                <div class="avatar-preview">â­</div>
              </div>
              <div class="avatar-option" data-avatar="ğŸŒŸ">
                <div class="avatar-preview">ğŸŒŸ</div>
              </div>
              <div class="avatar-option" data-avatar="ğŸ’š">
                <div class="avatar-preview">ğŸ’š</div>
              </div>
              <div class="avatar-option" data-avatar="ğŸŒˆ">
                <div class="avatar-preview">ğŸŒˆ</div>
              </div>
              <div class="avatar-option" data-avatar="ğŸ¨">
                <div class="avatar-preview">ğŸ¨</div>
              </div>
              <div class="avatar-option" data-avatar="ğŸŒ">
                <div class="avatar-preview">ğŸŒ</div>
              </div>
            </div>
          </div>

          <!-- Theme in Settings -->
          <div class="settings-section">
            <h3>Change Theme</h3>
            <div class="color-grid small">
              <div class="color-option" data-theme="ocean">
                <div class="color-preview" style="background: linear-gradient(135deg, #E6F4F1, #2C7A7B);"></div>
              </div>
              <div class="color-option" data-theme="sunset">
                <div class="color-preview" style="background: linear-gradient(135deg, #FFE8CC, #FF6B35);"></div>
              </div>
              <div class="color-option" data-theme="forest">
                <div class="color-preview" style="background: linear-gradient(135deg, #E8F5E9, #2E7D32);"></div>
              </div>
              <div class="color-option" data-theme="lavender">
                <div class="color-preview" style="background: linear-gradient(135deg, #F3E5F5, #7B1FA2);"></div>
              </div>
              <div class="color-option active" data-theme="mint">
                <div class="color-preview" style="background: linear-gradient(135deg, #E0F2F1, #00897B);"></div>
              </div>
              <div class="color-option" data-theme="coral">
                <div class="color-preview" style="background: linear-gradient(135deg, #FFEBEE, #E53935);"></div>
              </div>
            </div>
          </div>

          <!-- Current Session Info -->
          <div class="settings-section">
            <h3>Session Info</h3>
            <div class="info-box">
              <p><strong>Your ID:</strong> <span id="settingsUserId">-</span></p>
              <p><strong>Session ID:</strong> <span id="settingsSessionId">-</span></p>
              <p><strong>Messages:</strong> <span id="settingsMessageCount">0</span></p>
            </div>
          </div>

          <!-- Clear Chat -->
          <div class="settings-section">
            <button id="newChatBtn" class="btn btn-secondary">Start New Conversation</button>
            <p class="help-text">This will start a fresh session</p>
          </div>
        </div>
      </div>
    </div>

    <!-- Loading Indicator -->
    <div id="loadingIndicator" class="loading-indicator">
      <div class="spinner"></div>
      <p>Companion is thinking...</p>
    </div>
  </div>

  <script src="chat.js"></script>
  <script src="themes.js"></script>
</body>
</html>
